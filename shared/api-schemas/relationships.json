{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Relationship API Schema",
  "description": "에셋 간 관계(Relationship) API 스키마 정의",
  "type": "object",
  "definitions": {
    "RelationshipDto": {
      "type": "object",
      "required": ["id", "fromAssetId", "toAssetId", "relationshipType", "createdAt"],
      "properties": {
        "id": { "type": "string", "description": "Relationship ID" },
        "fromAssetId": { "type": "string", "description": "시작 에셋 ID" },
        "toAssetId": { "type": "string", "description": "대상 에셋 ID" },
        "relationshipType": { "type": "string", "description": "관계 종류 (예: feeds_into, contains, located_in)" },
        "properties": { "type": "object", "description": "관계 단위 속성", "additionalProperties": true },
        "createdAt": { "type": "string", "format": "date-time", "description": "생성 시각" },
        "updatedAt": { "type": "string", "format": "date-time", "description": "마지막 업데이트 시각" }
      }
    },
    "CreateRelationshipRequest": {
      "type": "object",
      "required": ["fromAssetId", "toAssetId", "relationshipType"],
      "properties": {
        "fromAssetId": { "type": "string", "description": "시작 에셋 ID" },
        "toAssetId": { "type": "string", "description": "대상 에셋 ID" },
        "relationshipType": { "type": "string", "description": "관계 종류" },
        "properties": { "type": "object", "description": "관계 단위 속성", "additionalProperties": true }
      }
    },
    "UpdateRelationshipRequest": {
      "type": "object",
      "properties": {
        "fromAssetId": { "type": "string", "description": "시작 에셋 ID" },
        "toAssetId": { "type": "string", "description": "대상 에셋 ID" },
        "relationshipType": { "type": "string", "description": "관계 종류" },
        "properties": { "type": "object", "description": "관계 단위 속성", "additionalProperties": true }
      }
    }
  },
  "paths": {
    "/api/relationships": {
      "get": {
        "summary": "모든 relationship 목록 조회",
        "responses": {
          "200": {
            "description": "성공",
            "content": { "application/json": { "schema": { "type": "array", "items": { "$ref": "#/definitions/RelationshipDto" } } } }
          }
        }
      },
      "post": {
        "summary": "Relationship 생성",
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/definitions/CreateRelationshipRequest" } } } },
        "responses": {
          "201": { "description": "생성됨", "content": { "application/json": { "schema": { "$ref": "#/definitions/RelationshipDto" } } } },
          "400": { "description": "검증 실패" }
        }
      }
    },
    "/api/relationships/{id}": {
      "get": {
        "summary": "특정 relationship 조회",
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": {
          "200": { "description": "성공", "content": { "application/json": { "schema": { "$ref": "#/definitions/RelationshipDto" } } } },
          "404": { "description": "Relationship을 찾을 수 없음" }
        }
      },
      "put": {
        "summary": "특정 relationship 수정",
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/definitions/UpdateRelationshipRequest" } } } },
        "responses": {
          "200": { "description": "성공", "content": { "application/json": { "schema": { "$ref": "#/definitions/RelationshipDto" } } } },
          "400": { "description": "검증 실패" },
          "404": { "description": "Relationship을 찾을 수 없음" }
        }
      },
      "delete": {
        "summary": "특정 relationship 삭제",
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": {
          "204": { "description": "삭제됨" },
          "404": { "description": "Relationship을 찾을 수 없음" }
        }
      }
    }
  }
}
